<app-menu></app-menu>

<div class="container py-4">
  <div class="row">
    <div class="col-12">
      <div class="card my-4">
        <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
          <div class="container-title">
            <h1 class="title">
              Product
              <span class="id fw-bold text-danger">{{ product.id }}</span>
            </h1>
            <div class="text-center">
              <button class="btn btn-secondary" (click)="toggleEdit()">
                Toggle Edit
              </button>
            </div>
          </div>
        </div>
        <div class="card-body px-0 pb-2 px-4">
          <div class="form">
            <div class="row">
              <div class="form-group col-6">
                <label for="id">Product ID</label>
                <input
                  type="text"
                  class="form-control"
                  id="id"
                  placeholder="Enter product ID"
                  [(ngModel)]="product.id"
                  disabled
                />
              </div>
              <div class="form-group col-6">
                <label for="name">Product Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  [(ngModel)]="product.name"
                  [disabled]="!editable"
                />
              </div>
            </div>

            <div class="row">
              <div class="form-group col-6">
                <label for="type">Type</label>
                <select
                  class="form-control"
                  id="type"
                  [(ngModel)]="product.type"
                  [disabled]="!editable"
                >
                  <option value="" disabled>Choose product type</option>
                  <option value="suit">Suit</option>
                  <option value="accessories">Accessories</option>
                </select>
              </div>
              <div class="form-group col-6">
                <label for="productPrice">Product Price</label>
                <input
                  type="number"
                  class="form-control"
                  id="productPrice"
                  placeholder="Enter product price"
                  [(ngModel)]="product.price"
                  [disabled]="!editable"
                />
              </div>
            </div>
            <div class="row">
              <label for="productDescription">Product Description</label>
              <textarea
                placeholder="Enter product description"
                class="form-control"
                [(ngModel)]="product.describe"
                [disabled]="!editable"
              >
              </textarea>
            </div>
            <div class="row">
              <div class="form-group col-4">
                <label for="imgURL">Product Images</label>
                <input
                  type="file"
                  class="form-control"
                  id="imgURL"
                  [(ngModel)]="product.imgURL"
                  multiple
                  [disabled]="!editable"
                />
              </div>
              <div class="col-2">
                <br />
                <div class="progress mt-2">
                  <div
                    class="progress-bar progress-bar-info"
                    role="progressbar"
                    attr.aria-valuenow="{{ percentage }}"
                    aria-valuemin="0"
                    aria-valuemax="100"
                    [ngStyle]="{ width: percentage + '%' }"
                  >
                    {{ percentage }}%
                  </div>
                </div>
              </div>
              <div class="form-group col-6">
                <label for="tags">Product Tags</label>
                <input
                  type="text"
                  class="form-control"
                  id="tags"
                  placeholder="Enter product tags"
                  [(ngModel)]="product.tag"
                  [disabled]="!editable"
                />
              </div>
            </div>
            <div class="row">
              <div class="form-group col-6">
                <label for="sizes">Product Sizes</label>
                <input
                  type="text"
                  class="form-control"
                  id="sizes"
                  placeholder="Enter product sizes, separated by a comma"
                  [(ngModel)]="product.size"
                  [disabled]="!editable"
                />
              </div>
              <div class="form-group col-6">
                <label for="colors">Product Colors</label>
                <input
                  type="text"
                  class="form-control"
                  id="colors"
                  placeholder="Enter product colors, separated by a comma"
                  [(ngModel)]="product.color"
                  [disabled]="!editable"
                />
              </div>
            </div>
            <div class="row">
              <div class="card-footer text-center">
                <button
                  class="btn btn-primary mx-3"
                  (click)="confirmSaveChanges(product)"
                >
                  Save Change
                </button>
                <button class="btn btn-primary" (click)="goBack()">
                  Go Back
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<ng-template #saveChangesConfirmationModal>
  <div class="modal-header">
    <h5 class="modal-title">Save Changes Confirmation?</h5>
    <button type="button" class="close" aria-label="Close" (click)="cancel()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">Are you sure you want to update this product?</div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-danger"
      (click)="updateProduct(product)"
    >
      Yes
    </button>
    <button type="button" class="btn btn-secondary" (click)="cancel()">
      No
    </button>
  </div>
</ng-template>
